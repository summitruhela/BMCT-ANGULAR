{"version":3,"file":"ng-custom-select.js.map","sources":["ng://ng-custom-select/lib/ng-select.component.ts","ng://ng-custom-select/lib/ng-select.module.ts"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, ElementRef, ViewChild, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, ControlValueAccessor, Validator, ValidationErrors, FormControl } from '@angular/forms';\nimport { Observable, fromEvent, of } from 'rxjs';\nimport { sample, distinctUntilChanged, switchMap, debounceTime, map } from \"rxjs/operators\";\n\n\n@Component({\n  selector: 'ng-select',\n  template: `<div class=\"ng-dropdown-wrapper\" [class]=\"styleGuide?.selectBoxClass\" tabindex=\"0\" (click)=\"active=!active\" [ngClass]=\"{'active':active, 'disabled': disable}\">\n    <input type=\"text\" name=\"searchTerm\" tabindex=\"-1\" [formControl]=\"searchTerm\" [readonly]=\"!isDatalist\" #searchInput>\n    <span [class]=\"styleGuide?.caretClass\" id=\"caret\" [ngStyle]=\"{'right':positionRight}\" [ngClass]=\"{'icon':!styleGuide?.caretClass}\"></span>\n    <ul [ngClass]=\"{'ng-dropdown-menu' : true}\" [class]=\"styleGuide?.selectMenuClass\">\n        <li *ngFor=\"let option of filterOptions\" (click)=\"changeValue(option)\" [class]=\"styleGuide?.optionsClass\">\n            <span>{{option[displayKey] || option}}</span>\n        </li>\n    </ul>\n</div>`,\n  styles: [`@charset \"UTF-8\";.ng-dropdown-wrapper{display:inline-block;position:relative}.ng-dropdown-wrapper input[type=text]{width:90%;border:none;outline:0;text-transform:capitalize}.ng-dropdown-wrapper #caret{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:999}.ng-dropdown-wrapper .icon::after{content:\"â¼\";text-align:center;pointer-events:none}.ng-dropdown-wrapper .ng-dropdown-menu{display:none;position:absolute;top:102%;left:0;right:0;list-style:none;overflow:auto;z-index:9999}.ng-dropdown-wrapper .ng-dropdown-menu li span{text-transform:capitalize;transition:all .3s ease-out}.ng-dropdown-wrapper.active #caret{-webkit-transform:translateY(-50%) rotate(180deg);transform:translateY(-50%) rotate(180deg)}.ng-dropdown-wrapper.active .ng-dropdown-menu{display:block}.disabled{cursor:not-allowed;pointer-events:none;opacity:.7;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}`],\n  host: {\n    '(document:click)': 'closeDropdown($event)',\n  },\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgSelectComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => NgSelectComponent),\n      multi: true,\n    }\n  ]\n})\nexport class NgSelectComponent implements OnInit, ControlValueAccessor, Validator {\n\n  // List of options\n  @Input() options: Array<any>;\n\n  //name of key to displayed as options\n  @Input() displayKey: string;\n\n  //contains various Config classes for dropdown \n  @Input() styleGuide: any;\n\n  //True if Dropdown should behave like a datalist\n  @Input() isDatalist: boolean;\n\n  //True if select box is disabled\n  @Input() disable : boolean;\n\n  //List of properties for which searching is applied in list\n  @Input() searchKeys: Array<string>;\n\n  @ViewChild('searchInput') searchInput: ElementRef;\n\n  @Output() onChange = new EventEmitter();\n\n  selectedItem: any;\n  searchTerm: FormControl;\n  filterOptions: Array<any>;\n\n  active: boolean = false;\n  positionTop: any;\n  positionRight: any;\n\n  constructor(private _eref: ElementRef) {\n    this.searchTerm = new FormControl();\n  }\n\n  private propagateChange = (_: any) => { }\n\n  writeValue(obj: any) {\n    this.selectedItem = obj;\n    obj && Object.keys(obj).length ? this.searchTerm.setValue(obj[this.displayKey] || obj) : null;\n  }\n\n  registerOnTouched() { }\n\n  registerOnChange(fn: any) {\n    this.propagateChange = fn;\n  }\n\n  validate(): ValidationErrors {\n    return this.selectedItem ? null : { required: true };\n  }\n\n\n  ngOnInit() {\n    this.selectedItem = this.options[0];\n    setTimeout(() => {\n      this.getCaretPosition();\n    })\n\n    if (!this.displayKey && typeof this.options[0] === 'object')\n      this.displayKey = Object.keys(this.options[0])[0];\n    this.searchTerm.setValue(this.options[0][this.displayKey] || this.options[0]);\n    this.filterOptions = Object.assign([], this.options);\n    this.isDatalist ? this.initSearch() : null;\n  }\n\n  initSearch() {\n    if ((!this.searchKeys || !this.searchKeys.length) && this.displayKey && typeof this.options[0] === 'object')\n      this.searchKeys = [this.displayKey];\n    else if (!this.displayKey || typeof this.options[0] !== 'object')\n      this.searchKeys = ['0'];\n\n    fromEvent(this.searchInput.nativeElement, 'input')\n      .pipe(\n        map((e: any) => e.target.value),\n        debounceTime(100),\n        distinctUntilChanged(),\n        switchMap(term => {\n          return of(\n            this.options.filter(option => {\n              for (let i = 0, len = this.searchKeys.length; i < len; i++) {\n                if (typeof option === \"object\" && option[this.searchKeys[i]].toString().toLowerCase().indexOf(term.toLowerCase()) > -1) {\n                  return option;\n                } else if (typeof option !== \"object\" && option.toString().toLowerCase().indexOf(term.toLowerCase()) > -1)\n                  return option;\n              }\n            })\n          )\n        }\n        ))\n      .subscribe(list => {\n        this.filterOptions = list;\n      });\n  }\n\n  changeValue(option) {\n    this.searchTerm.setValue(option[this.displayKey] || option);\n    this.propagateChange(option);\n    this.onChange.emit(option);\n    this.selectedItem = option;\n    this.filterOptions = this.isDatalist ? Object.assign([], this.options) : this.filterOptions;\n  }\n\n  closeDropdown(event) {\n    if (!this._eref.nativeElement.contains(event.target)) {\n      this.active = false;\n      this.searchTerm.setValue(this.selectedItem[this.displayKey] || this.selectedItem);\n      this.filterOptions = Object.assign([], this.options);\n    }\n  }\n\n  getCaretPosition() {\n    let computedStyles = window.getComputedStyle(this._eref.nativeElement.querySelector('.ng-dropdown-wrapper'), null);\n    //this.positionTop = computedStyles.getPropertyValue(\"padding-top\");\n    this.positionRight = computedStyles.getPropertyValue(\"padding-right\");\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgSelectComponent } from './ng-select.component';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [NgSelectComponent],\n  exports: [NgSelectComponent]\n})\nexport class NgSelectModule { }\n"],"names":[],"mappings":"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"}
