{"version":3,"file":"ng-custom-select.umd.js.map","sources":["ng://ng-custom-select/lib/ng-select.component.ts","ng://ng-custom-select/lib/ng-select.module.ts"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, ElementRef, ViewChild, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS, ControlValueAccessor, Validator, ValidationErrors, FormControl } from '@angular/forms';\nimport { Observable, fromEvent, of } from 'rxjs';\nimport { sample, distinctUntilChanged, switchMap, debounceTime, map } from \"rxjs/operators\";\n\n\n@Component({\n  selector: 'ng-select',\n  template: `<div class=\"ng-dropdown-wrapper\" [class]=\"styleGuide?.selectBoxClass\" tabindex=\"0\" (click)=\"active=!active\" [ngClass]=\"{'active':active, 'disabled': disable}\">\n    <input type=\"text\" name=\"searchTerm\" tabindex=\"-1\" [formControl]=\"searchTerm\" [readonly]=\"!isDatalist\" #searchInput>\n    <span [class]=\"styleGuide?.caretClass\" id=\"caret\" [ngStyle]=\"{'right':positionRight}\" [ngClass]=\"{'icon':!styleGuide?.caretClass}\"></span>\n    <ul [ngClass]=\"{'ng-dropdown-menu' : true}\" [class]=\"styleGuide?.selectMenuClass\">\n        <li *ngFor=\"let option of filterOptions\" (click)=\"changeValue(option)\" [class]=\"styleGuide?.optionsClass\">\n            <span>{{option[displayKey] || option}}</span>\n        </li>\n    </ul>\n</div>`,\n  styles: [`@charset \"UTF-8\";.ng-dropdown-wrapper{display:inline-block;position:relative}.ng-dropdown-wrapper input[type=text]{width:90%;border:none;outline:0;text-transform:capitalize}.ng-dropdown-wrapper #caret{position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:999}.ng-dropdown-wrapper .icon::after{content:\"â¼\";text-align:center;pointer-events:none}.ng-dropdown-wrapper .ng-dropdown-menu{display:none;position:absolute;top:102%;left:0;right:0;list-style:none;overflow:auto;z-index:9999}.ng-dropdown-wrapper .ng-dropdown-menu li span{text-transform:capitalize;transition:all .3s ease-out}.ng-dropdown-wrapper.active #caret{-webkit-transform:translateY(-50%) rotate(180deg);transform:translateY(-50%) rotate(180deg)}.ng-dropdown-wrapper.active .ng-dropdown-menu{display:block}.disabled{cursor:not-allowed;pointer-events:none;opacity:.7;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}`],\n  host: {\n    '(document:click)': 'closeDropdown($event)',\n  },\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgSelectComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => NgSelectComponent),\n      multi: true,\n    }\n  ]\n})\nexport class NgSelectComponent implements OnInit, ControlValueAccessor, Validator {\n\n  // List of options\n  @Input() options: Array<any>;\n\n  //name of key to displayed as options\n  @Input() displayKey: string;\n\n  //contains various Config classes for dropdown \n  @Input() styleGuide: any;\n\n  //True if Dropdown should behave like a datalist\n  @Input() isDatalist: boolean;\n\n  //True if select box is disabled\n  @Input() disable : boolean;\n\n  //List of properties for which searching is applied in list\n  @Input() searchKeys: Array<string>;\n\n  @ViewChild('searchInput') searchInput: ElementRef;\n\n  @Output() onChange = new EventEmitter();\n\n  selectedItem: any;\n  searchTerm: FormControl;\n  filterOptions: Array<any>;\n\n  active: boolean = false;\n  positionTop: any;\n  positionRight: any;\n\n  constructor(private _eref: ElementRef) {\n    this.searchTerm = new FormControl();\n  }\n\n  private propagateChange = (_: any) => { }\n\n  writeValue(obj: any) {\n    this.selectedItem = obj;\n    obj && Object.keys(obj).length ? this.searchTerm.setValue(obj[this.displayKey] || obj) : null;\n  }\n\n  registerOnTouched() { }\n\n  registerOnChange(fn: any) {\n    this.propagateChange = fn;\n  }\n\n  validate(): ValidationErrors {\n    return this.selectedItem ? null : { required: true };\n  }\n\n\n  ngOnInit() {\n    this.selectedItem = this.options[0];\n    setTimeout(() => {\n      this.getCaretPosition();\n    })\n\n    if (!this.displayKey && typeof this.options[0] === 'object')\n      this.displayKey = Object.keys(this.options[0])[0];\n    this.searchTerm.setValue(this.options[0][this.displayKey] || this.options[0]);\n    this.filterOptions = Object.assign([], this.options);\n    this.isDatalist ? this.initSearch() : null;\n  }\n\n  initSearch() {\n    if ((!this.searchKeys || !this.searchKeys.length) && this.displayKey && typeof this.options[0] === 'object')\n      this.searchKeys = [this.displayKey];\n    else if (!this.displayKey || typeof this.options[0] !== 'object')\n      this.searchKeys = ['0'];\n\n    fromEvent(this.searchInput.nativeElement, 'input')\n      .pipe(\n        map((e: any) => e.target.value),\n        debounceTime(100),\n        distinctUntilChanged(),\n        switchMap(term => {\n          return of(\n            this.options.filter(option => {\n              for (let i = 0, len = this.searchKeys.length; i < len; i++) {\n                if (typeof option === \"object\" && option[this.searchKeys[i]].toString().toLowerCase().indexOf(term.toLowerCase()) > -1) {\n                  return option;\n                } else if (typeof option !== \"object\" && option.toString().toLowerCase().indexOf(term.toLowerCase()) > -1)\n                  return option;\n              }\n            })\n          )\n        }\n        ))\n      .subscribe(list => {\n        this.filterOptions = list;\n      });\n  }\n\n  changeValue(option) {\n    this.searchTerm.setValue(option[this.displayKey] || option);\n    this.propagateChange(option);\n    this.onChange.emit(option);\n    this.selectedItem = option;\n    this.filterOptions = this.isDatalist ? Object.assign([], this.options) : this.filterOptions;\n  }\n\n  closeDropdown(event) {\n    if (!this._eref.nativeElement.contains(event.target)) {\n      this.active = false;\n      this.searchTerm.setValue(this.selectedItem[this.displayKey] || this.selectedItem);\n      this.filterOptions = Object.assign([], this.options);\n    }\n  }\n\n  getCaretPosition() {\n    let computedStyles = window.getComputedStyle(this._eref.nativeElement.querySelector('.ng-dropdown-wrapper'), null);\n    //this.positionTop = computedStyles.getPropertyValue(\"padding-top\");\n    this.positionRight = computedStyles.getPropertyValue(\"padding-right\");\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgSelectComponent } from './ng-select.component';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [NgSelectComponent],\n  exports: [NgSelectComponent]\n})\nexport class NgSelectModule { }\n"],"names":["EventEmitter","FormControl","fromEvent","map","debounceTime","distinctUntilChanged","switchMap","of","Component","NG_VALUE_ACCESSOR","forwardRef","NG_VALIDATORS","ElementRef","Input","ViewChild","Output","NgModule","CommonModule","FormsModule","ReactiveFormsModule"],"mappings":"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"}
